{"version":3,"sources":["store/reducers/content.js","store/reducers/index.js","store/index.js","store/actionTypes.js","store/actions/content.js","store/actions/index.js","components/fluidSimulation/config.js","components/fluidSimulation/utils.js","components/fluidSimulation/customHooks/usePrograms/shaders/base.vert.js","components/fluidSimulation/customHooks/usePrograms/shaders/advection.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/advection.manual.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/background.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/clear.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/color.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/curl.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/display.shading.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/divergence.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/gradient.subtract.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/pressure.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/splat.frag.js","components/fluidSimulation/customHooks/usePrograms/shaders/vorticity.frag.js","components/fluidSimulation/customHooks/usePrograms/index.js","components/fluidSimulation/customHooks/useFramebuffers.js","components/fluidSimulation/customHooks/usePointers.js","components/fluidSimulation/customHooks/useFormats.js","components/fluidSimulation/customHooks/useResolution.js","components/fluidSimulation/Simulation.js","components/fluidSimulation/index.js","components/home/index.js","components/content/index.js","App.js","index.js"],"names":["initialState","home","layer1","content","state","arguments","length","undefined","action","type","Object","objectSpread","payload","data","setLayer1","rootReducer","combineReducers","store","createStore","SET_LAYER_1","ActionTypes","actions","SIM_RESOLUTION","DYE_RESOLUTION","DENSITY_DISSIPATION","VELOCITY_DISSIPATION","PRESSURE_DISSIPATION","PRESSURE_ITERATIONS","CURL","SPLAT_RADIUS","TRANSPARENT","INITIAL_SPLATS","generateColor","colorTheme","c","h","s","v","r","g","b","i","Math","floor","f","p","q","t","random","HSVtoRGB","base_vert","advection_frag","advection_manual_frag","background_frag","clear_frag","color_frag","curl_frag","display_shading_frag","divergence_frag","gradient_subtract_frag","pressure_frag","splat_frag","vorticity_frag","useProgramAndUniforms","gl","frag","program","useProgram","shaders","uniforms","useProgramUniforms","useMemo","useFramebuffers","dyeSize","simSize","formats","R","RG","RGBA","halfFloat","hasLinear","getOptsRFormat","minMag","NEAREST","format","internalFormat","curlFBO","useFBO","apply","concat","toConsumableArray","divergenceFBO","densityDFBO","useDoubleFBO","LINEAR","pressureDFBO","velocityDFBO","Pointer","this","id","x","y","dx","dy","down","moved","color","getSupportedFormat","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","fbo","createFramebuffer","attach","COLOR_ATTACHMENT0","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","supportRenderTextureFormat","R16F","RG16F","RGBA16F","useResolution","size","width","height","aspectRatio","max","round","min","backColor","convertHex","Simulation","props","_useCanvasSize","useCanvasSize","clientWidth","clientHeight","useWebGLContext","version","useWebGLVersion","texHalfFLoat","webgl2","getExtension","HALF_FLOAT","HALF_FLOAT_OES","RED","useFormats","pointers","canvas","useCanvas","useEffect","lastColorChange","timerLoop","timer","Date","now","stop","onMouseMove","e","pageX","pageY","offsetLeft","offsetTop","onTouchMove","preventDefault","touches","targetTouches","pointer","onMouseDown","onTouchStart","push","identifier","onMouseUp","onTouchEnd","changedTouches","j","addEventListener","window","removeEventListener","usePointers","programs","advection","background","clear","curl","displayShading","divergence","gradient","pressure","splat","vorticity","usePrograms","config","framebuffers","splatStack","renderToBuffer","verts","Float32Array","index","Uint16Array","bindBuffer","ARRAY_BUFFER","createBuffer","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","vertexAttribPointer","FLOAT","enableVertexAttribArray","buffer","drawElements","TRIANGLES","UNSIGNED_SHORT","updateSplat","splatRGB","viewport","centerX","centerY","uniform1i","uTarget","read","uniform1f","uniform2f","point","uniform3f","radius","write","swap","multipleSplats","amount","pop","input","dt","disable","BLEND","texelSize","uVelocity","uCurl","uTexture","value","uDivergence","uPressure","shasLinear","dyeTexelSize","velocityId","uSource","dissipation","step","target","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","enable","tWidth","tHeight","uniform4f","render","attrs","alpha","depth","stencil","antialias","preserveDrawingBuffer","style","borderRadius","cursor","userSelect","WebkitTapHighlightColor","FluidSimulation","container","useRef","useMeasure","react_default","a","createElement","className","ref","esm","canvasStyle","contextAttrs","fluidSimulation_Simulation","Home","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleMouseDown","setState","open","handleTouchStart","_this2","layers","style1","spring","stiffness","damping","fluidSimulation","onClick","react_motion","_ref","WebkitTransform","transform","Component","connect","ownProps","dispatch","Content","react_router","exact","path","components_home","withRouter","App","components_content","ReactDOM","es","react_router_dom","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e8549433.chunk.js","sourcesContent":["let initialState = {\n    home: {\n        layer1: false\n    }\n};\n\nfunction setLayer1(state, action) {\n    let nextState = {\n        ...state,\n        home: {\n            ...state.home,\n            layer1: action.payload.data,\n        }\n    }\n\n    return nextState\n}\n\nfunction content(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_LAYER_1':\n            return setLayer1(state, action);\n        \n        default:\n            return state;\n    }\n}\n\nexport default content;","import { combineReducers } from 'redux';\n\nimport content from './content';\n\nconst rootReducer = combineReducers({\n    content,\n});\n\nexport default rootReducer;\n","import { createStore } from 'redux';\n\nimport rootReducer from './reducers';\n\nexport const store = createStore(rootReducer);\n","//content\nexport const SET_LAYER_1 = 'SET_LAYER_1';","import * as ActionTypes from 'store/actionTypes.js';\n\nexport function setLayer1(data) {\n    return {\n        type: ActionTypes.SET_LAYER_1,\n        payload: { data }\n    };\n}","\nimport * as content from './content';\n\nexport default {\n    ...content,\n};\n","export const SIM_RESOLUTION = 128\nexport const DYE_RESOLUTION = 512\nexport const DENSITY_DISSIPATION = 0.975\nexport const VELOCITY_DISSIPATION = 0.98\nexport const PRESSURE_DISSIPATION = 0.7\nexport const PRESSURE_ITERATIONS = 40\nexport const CURL = 20\nexport const SPLAT_RADIUS = 3\nexport const SHADING = true\nexport const COLORFUL = true\nexport const BACK_COLOR = '#282b34'\nexport const TRANSPARENT = false\nexport const INITIAL_SPLATS = 5","export function generateColor(colorTheme = []) {\n  const c = HSVtoRGB(Math.random(), 1.0, 1.0, colorTheme)\n\n  c.r *= 0.15\n  c.g *= 0.15\n  c.b *= 0.15\n\n  return c\n}\n\n// prettier-ignore\nfunction HSVtoRGB(h, s, v, colorTheme) {\n    const i = Math.floor(h * 6)\n    const f = h * 6 - i\n    const p = v * (1 - s)\n    const q = v * (1 - f * s)\n    const t = v * (1 - (1 - f) * s)\n    \n    let r, g, b\n    \n    // red, orange, yellow, green, blue, violet\n    // r, o, y, g, b, v\n    let selectedColor = colorTheme[Math.floor(Math.random()*colorTheme.length)]\n    switch(selectedColor) {\n        case 'r':\n            (r = v); (g = p); (b = q)\n            break\n        case 'o':\n            (r = v); (g = t); (b = p)\n            break\n        case 'y':\n            (r = q); (g = v); (b = p)\n            break\n        case 'g':\n            (r = p); (g = v); (b = t)\n            break\n        case 'b':\n            (r = p); (g = q); (b = v)\n            break\n        case 'v':\n            (r = t); (g = p); (b = v)\n            break\n        default:\n            switch(i % 4) {\n                case 0:\n                    (r = v); (g = t); (b = p) //brightish orange/yellow\n                    break\n                case 1:\n                    (r = q); (g = v); (b = p) //neon green/yellow\n                    break\n                case 2:\n                    (r = p); (g = v); (b = t) //bright green torquoise\n                    break\n                case 3:\n                    (r = p); (g = q); (b = v) //brightish blue/light blue\n                    break\n                case 4:\n                    (r = t); (g = p); (b = v) //bright magenta\n                    break\n                case 5:\n                    (r = v); (g = p); (b = q) //bright red/pink\n                    break\n            }\n\n    }\n\n    return { r, g, b }\n}\n","export default `\n  precision highp float;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  attribute vec2 aPosition;\n\n  uniform vec2 texelSize;\n\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  \n  void main () {\n    vUv = aPosition * 0.5 + 0.5;\n    vL = vUv - vec2(texelSize.x, 0.0);\n    vR = vUv + vec2(texelSize.x, 0.0);\n    vT = vUv + vec2(0.0, texelSize.y);\n    vB = vUv - vec2(0.0, texelSize.y);\n\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n  }\n`\n","export default `\n  precision highp float;\n  precision highp sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying vec2 vUv;\n  uniform sampler2D uVelocity;\n  uniform sampler2D uSource;\n  uniform vec2 texelSize;\n  uniform float dt;\n  uniform float dissipation;\n\n  void main () {\n    vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n    gl_FragColor = dissipation * texture2D(uSource, coord);\n    gl_FragColor.a = 1.0;\n  }\n`\n","export default `\n  precision highp float;\n  precision highp sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying vec2 vUv;\n  uniform sampler2D uVelocity;\n  uniform sampler2D uSource;\n  uniform vec2 texelSize;\n  uniform vec2 dyeTexelSize;\n  uniform float dt;\n  uniform float dissipation;\n\n  vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n    vec2 st = uv / tsize - 0.5;\n\n    vec2 iuv = floor(st);\n    vec2 fuv = fract(st);\n\n    vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n    vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n    vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n    vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n\n    return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n  }\n\n  void main () {\n    vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n\n    gl_FragColor = dissipation * bilerp(uSource, coord, dyeTexelSize);\n    gl_FragColor.a = 1.0;\n  }\n`\n","export default `\n  precision highp float;\n  precision highp sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying vec2 vUv;\n  uniform sampler2D uTexture;\n  uniform float aspectRatio;\n\n  #define SCALE 25.0\n\n  void main () {\n    vec2 uv = floor(vUv * SCALE * vec2(aspectRatio, 1.0));\n    float v = mod(uv.x + uv.y, 2.0);\n    v = v * 0.1 + 0.8;\n    gl_FragColor = vec4(vec3(v), 1.0);\n  }\n`\n","export default `\n  precision mediump float;\n  precision mediump sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying highp vec2 vUv;\n  uniform sampler2D uTexture;\n  uniform float value;\n\n  void main () {\n    gl_FragColor = value * texture2D(uTexture, vUv);\n  }\n`\n","export default `\n  precision mediump float;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  uniform vec4 color;\n\n  void main () {\n    gl_FragColor = color;\n  }\n`\n","export default `\n  precision mediump float;\n  precision mediump sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  uniform sampler2D uVelocity;\n\n  varying highp vec2 vUv;\n  varying highp vec2 vL;\n  varying highp vec2 vR;\n  varying highp vec2 vT;\n  varying highp vec2 vB;\n\n  void main () {\n    float L = texture2D(uVelocity, vL).y;\n    float R = texture2D(uVelocity, vR).y;\n    float T = texture2D(uVelocity, vT).x;\n    float B = texture2D(uVelocity, vB).x;\n    float vorticity = R - L - T + B;\n\n    gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n  }\n`\n","export default `\n  precision highp float;\n  precision highp sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  uniform sampler2D uTexture;\n  uniform vec2 texelSize;\n\n  void main () {\n    vec3 L = texture2D(uTexture, vL).rgb;\n    vec3 R = texture2D(uTexture, vR).rgb;\n    vec3 T = texture2D(uTexture, vT).rgb;\n    vec3 B = texture2D(uTexture, vB).rgb;\n    vec3 C = texture2D(uTexture, vUv).rgb;\n\n    float dx = length(R) - length(L);\n    float dy = length(T) - length(B);\n\n    vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n    vec3 l = vec3(0.0, 0.0, 1.0);\n\n    float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n    C.rgb *= diffuse;\n\n    float a = max(C.r, max(C.g, C.b));\n    gl_FragColor = vec4(C, a);\n  }\n`\n","export default `\n  precision mediump float;\n  precision mediump sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying highp vec2 vUv;\n  varying highp vec2 vL;\n  varying highp vec2 vR;\n  varying highp vec2 vT;\n  varying highp vec2 vB;\n  uniform sampler2D uVelocity;\n\n  void main () {\n    float L = texture2D(uVelocity, vL).x;\n    float R = texture2D(uVelocity, vR).x;\n    float T = texture2D(uVelocity, vT).y;\n    float B = texture2D(uVelocity, vB).y;\n\n    vec2 C = texture2D(uVelocity, vUv).xy;\n    if (vL.x < 0.0) { L = -C.x; }\n    if (vR.x > 1.0) { R = -C.x; }\n    if (vT.y > 1.0) { T = -C.y; }\n    if (vB.y < 0.0) { B = -C.y; }\n\n    float div = 0.5 * (R - L + T - B);\n\n    gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n  }\n`\n","export default `\n  precision mediump float;\n  precision mediump sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying highp vec2 vUv;\n  varying highp vec2 vL;\n  varying highp vec2 vR;\n  varying highp vec2 vT;\n  varying highp vec2 vB;\n  uniform sampler2D uPressure;\n  uniform sampler2D uVelocity;\n\n  vec2 boundary (vec2 uv) {\n    return uv;\n    // uv = min(max(uv, 0.0), 1.0);\n    // return uv;\n  }\n\n  void main () {\n    float L = texture2D(uPressure, boundary(vL)).x;\n    float R = texture2D(uPressure, boundary(vR)).x;\n    float T = texture2D(uPressure, boundary(vT)).x;\n    float B = texture2D(uPressure, boundary(vB)).x;\n    vec2 velocity = texture2D(uVelocity, vUv).xy;\n    velocity.xy -= vec2(R - L, T - B);\n    gl_FragColor = vec4(velocity, 0.0, 1.0);\n  }\n`\n","export default `\n  precision mediump float;\n  precision mediump sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying highp vec2 vUv;\n  varying highp vec2 vL;\n  varying highp vec2 vR;\n  varying highp vec2 vT;\n  varying highp vec2 vB;\n  uniform sampler2D uPressure;\n  uniform sampler2D uDivergence;\n\n  vec2 boundary (vec2 uv) {\n    return uv;\n    // uncomment if you use wrap or repeat texture mode\n    // uv = min(max(uv, 0.0), 1.0);\n    // return uv;\n  }\n\n  void main () {\n    float L = texture2D(uPressure, boundary(vL)).x;\n    float R = texture2D(uPressure, boundary(vR)).x;\n    float T = texture2D(uPressure, boundary(vT)).x;\n    float B = texture2D(uPressure, boundary(vB)).x;\n    float C = texture2D(uPressure, vUv).x;\n    float divergence = texture2D(uDivergence, vUv).x;\n    float pressure = (L + R + B + T - divergence) * 0.25;\n    gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n  }\n`\n","export default `\n  precision highp float;\n  precision highp sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying vec2 vUv;\n\n  uniform sampler2D uTarget;\n  uniform float aspectRatio;\n  uniform vec3 color;\n  uniform vec2 point;\n  uniform float radius;\n\n  void main () {\n    vec2 p = vUv - point.xy;\n    p.x *= aspectRatio;\n    vec3 splat = exp(-dot(p, p) / radius) * color;\n    vec3 base = texture2D(uTarget, vUv).xyz;\n    gl_FragColor = vec4(base + splat, 1.0);\n  }\n`\n","export default `\n  precision highp float;\n  precision highp sampler2D;\n\n  // This shader is from the awesome demo at:\n  // https://github.com/PavelDoGreat/WebGL-Fluid-Simulation\n\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  uniform sampler2D uVelocity;\n  uniform sampler2D uCurl;\n  uniform float curl;\n  uniform float dt;\n\n  void main () {\n    float L = texture2D(uCurl, vL).x;\n    float R = texture2D(uCurl, vR).x;\n    float T = texture2D(uCurl, vT).x;\n    float B = texture2D(uCurl, vB).x;\n    float C = texture2D(uCurl, vUv).x;\n\n    vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n    force /= length(force) + 0.0001;\n    force *= curl * C;\n    force.y *= -1.0;\n\n    vec2 vel = texture2D(uVelocity, vUv).xy;\n    gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);\n  }\n`\n","import { useMemo } from 'react'\nimport { useProgram, useProgramUniforms } from '@react-vertex/core'\nimport * as shaders from './shaders'\n\nfunction useProgramAndUniforms(gl, frag) {\n  const program = useProgram(gl, shaders.vert, frag)\n  const uniforms = useProgramUniforms(gl, program)\n\n  const memoized = useMemo(() => {\n    return { program, uniforms }\n  }, [program, uniforms])\n\n  return memoized\n}\n\nexport default function usePrograms(gl, hasLinear) {\n  const advectionFrag = hasLinear ? shaders.advection : shaders.advectionManual\n\n  const advection = useProgramAndUniforms(gl, advectionFrag)\n  const background = useProgramAndUniforms(gl, shaders.background)\n  const clear = useProgramAndUniforms(gl, shaders.clear)\n  const color = useProgramAndUniforms(gl, shaders.color)\n  const curl = useProgramAndUniforms(gl, shaders.curl)\n  const displayShading = useProgramAndUniforms(gl, shaders.displayShading)\n  const divergence = useProgramAndUniforms(gl, shaders.divergence)\n  const gradient = useProgramAndUniforms(gl, shaders.gradient)\n  const pressure = useProgramAndUniforms(gl, shaders.pressure)\n  const splat = useProgramAndUniforms(gl, shaders.splat)\n  const vorticity = useProgramAndUniforms(gl, shaders.vorticity)\n\n  const memoized = useMemo(() => {\n    return {\n      advection,\n      background,\n      clear,\n      color,\n      curl,\n      displayShading,\n      divergence,\n      gradient,\n      pressure,\n      splat,\n      vorticity,\n    }\n  }, [\n    advection,\n    background,\n    clear,\n    color,\n    curl,\n    displayShading,\n    divergence,\n    gradient,\n    pressure,\n    splat,\n    vorticity,\n  ])\n\n  return memoized\n}\n","import { useMemo } from 'react'\nimport { useFBO, useDoubleFBO } from '@react-vertex/core'\n\nfunction useFramebuffers(gl, dyeSize, simSize, formats) {\n  const { R, RG, RGBA, halfFloat, hasLinear } = formats\n\n  const getOptsRFormat = () => ({\n    type: halfFloat,\n    minMag: gl.NEAREST,\n    format: R.format,\n    internalFormat: R.internalFormat,\n  })\n\n  const getOptsRGFormat = () => ({\n    type: halfFloat,\n    minMag: hasLinear ? gl.LINEAR : gl.NEAREST,\n    format: RG.format,\n    internalFormat: RG.internalFormat,\n  })\n\n  const getOptsRGBAFormat = () => ({\n    type: halfFloat,\n    minMag: hasLinear ? gl.LINEAR : gl.NEAREST,\n    format: RGBA.format,\n    internalFormat: RGBA.internalFormat,\n  })\n\n  const curlFBO = useFBO(gl, ...simSize, getOptsRFormat)\n  const divergenceFBO = useFBO(gl, ...simSize, getOptsRFormat)\n  const densityDFBO = useDoubleFBO(gl, ...dyeSize, getOptsRGBAFormat)\n  const pressureDFBO = useDoubleFBO(gl, ...simSize, getOptsRFormat)\n  const velocityDFBO = useDoubleFBO(gl, ...simSize, getOptsRGFormat)\n\n  const memoized = useMemo(() => {\n    return {\n      curlFBO,\n      divergenceFBO,\n      densityDFBO,\n      pressureDFBO,\n      velocityDFBO,\n    }\n  }, [curlFBO, divergenceFBO, densityDFBO, pressureDFBO, velocityDFBO])\n\n  return memoized\n}\n\nexport default useFramebuffers\n","import { useEffect, useMemo } from 'react'\nimport { timer } from 'd3-timer'\nimport { useCanvas } from '@react-vertex/core'\nimport { generateColor } from '../utils'\n\nexport function Pointer() {\n    this.id = -1\n    this.x = 0\n    this.y = 0\n    this.dx = 0\n    this.dy = 0\n    this.down = false\n    this.moved = false\n    this.color = [30, 0, 300]\n}\n\nexport default function usePointers(colorTheme) {\n    const canvas = useCanvas()\n\n    const pointers = useMemo(() => {\n        return [new Pointer()]\n    }, [])\n\n    useEffect(() => {\n        let lastColorChange = 0\n\n        const timerLoop = timer(() => {\n        if (lastColorChange + 100 < Date.now()) {\n            lastColorChange = Date.now()\n\n            for (let i = 0; i < pointers.length; i++) {\n            const p = pointers[i]\n            p.color = generateColor(colorTheme)\n            }\n        }\n        })\n\n        return () => timerLoop.stop()\n    })\n\n    useEffect(() => {\n        function onMouseMove(e) {\n            if(Math.random() > 0.8) {\n                /* mimicking onMouseDown */\n                pointers[0].down = true\n                pointers[0].color = generateColor(colorTheme)\n            }\n            \n            let x = e.pageX\n            let y = e.pageY\n\n            x -= canvas.offsetLeft\n            y -= canvas.offsetTop\n\n            pointers[0].moved = pointers[0].down\n            pointers[0].dx = (x - pointers[0].x) * 5.0\n            pointers[0].dy = (y - pointers[0].y) * 5.0\n            pointers[0].x = x\n            pointers[0].y = y\n        }\n\n        function onTouchMove(e) {\n            e.preventDefault()\n\n            const touches = e.targetTouches\n\n                for (let i = 0; i < touches.length; i++) {\n                    const pointer = pointers[i]\n                    pointer.moved = pointer.down\n\n                    let x = touches[i].pageX\n                    let y = touches[i].pageY\n\n                    x -= canvas.offsetLeft\n                    y -= canvas.offsetTop\n\n                    pointer.dx = (x - pointer.x) * 8.0\n                    pointer.dy = (y - pointer.y) * 8.0\n                    pointer.x = x\n                    pointer.y = y\n                }\n            }\n\n        function onMouseDown() {\n            // pointers[0].down = true\n            // pointers[0].color = generateColor(colorTheme)\n        }\n\n        function onTouchStart(e) {\n            e.preventDefault()\n\n            const touches = e.targetTouches\n\n            for (let i = 0; i < touches.length; i++) {\n                if (i >= pointers.length) {\n                pointers.push(new Pointer())\n                }\n\n                let x = touches[i].pageX\n                let y = touches[i].pageY\n\n                x -= canvas.offsetLeft\n                y -= canvas.offsetTop\n\n                pointers[i].id = touches[i].identifier\n                pointers[i].down = true\n                pointers[i].x = x\n                pointers[i].y = y\n                pointers[i].color = generateColor(colorTheme)\n            }\n        }\n\n        function onMouseUp() {\n        pointers[0].down = false\n        }\n\n        function onTouchEnd(e) {\n        const touches = e.changedTouches\n\n        for (let i = 0; i < touches.length; i++) {\n            for (let j = 0; j < pointers.length; j++) {\n            if (touches[i].identifier == pointers[j].id) {\n                pointers[j].down = false\n            }\n            }\n        }\n        }\n\n        canvas.addEventListener('mousemove', onMouseMove)\n        canvas.addEventListener('touchmove', onTouchMove, false)\n        canvas.addEventListener('mousedown', onMouseDown)\n        canvas.addEventListener('touchstart', onTouchStart)\n        window.addEventListener('mouseup', onMouseUp)\n        window.addEventListener('touchend', onTouchEnd)\n\n        return () => {\n        canvas.removeEventListener('mousemove', onMouseMove)\n        canvas.removeEventListener('touchmove', onTouchMove, false)\n        canvas.removeEventListener('mousedown', onMouseDown)\n        canvas.removeEventListener('touchstart', onTouchStart)\n        window.removeEventListener('mouseup', onMouseUp)\n        window.removeEventListener('touchend', onTouchEnd)\n        }\n    }, [pointers, canvas])\n\n    return pointers\n}\n","import { useMemo } from 'react'\nimport { useWebGLVersion } from '@react-vertex/core'\n\nfunction supportRenderTextureFormat(gl, internalFormat, format, type) {\n  const texture = gl.createTexture()\n  gl.bindTexture(gl.TEXTURE_2D, texture)\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST)\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST)\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n  gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, 4, 4, 0, format, type, null)\n\n  const fbo = gl.createFramebuffer()\n  const attach = gl.COLOR_ATTACHMENT0\n\n  gl.bindFramebuffer(gl.FRAMEBUFFER, fbo)\n  gl.framebufferTexture2D(gl.FRAMEBUFFER, attach, gl.TEXTURE_2D, texture, 0)\n\n  const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER)\n\n  if (status != gl.FRAMEBUFFER_COMPLETE) {\n    return false\n  }\n\n  return true\n}\n\nfunction getSupportedFormat(gl, internalFormat, format, type) {\n  if (!supportRenderTextureFormat(gl, internalFormat, format, type)) {\n    switch (internalFormat) {\n      case gl.R16F:\n        return getSupportedFormat(gl, gl.RG16F, gl.RG, type)\n      case gl.RG16F:\n        return getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, type)\n      default:\n        return null\n    }\n  }\n\n  return { internalFormat, format }\n}\n\nexport default function useFormats(gl) {\n  const version = useWebGLVersion()\n\n  const memoized = useMemo(() => {\n    let texHalfFLoat\n    let hasLinear\n\n    const webgl2 = version === 2\n\n    if (webgl2) {\n      gl.getExtension('EXT_color_buffer_float')\n      hasLinear = !!gl.getExtension('OES_texture_float_linear')\n    } else {\n      texHalfFLoat = gl.getExtension('OES_texture_half_float')\n      hasLinear = !!gl.getExtension('OES_texture_half_float_linear')\n    }\n\n    const halfFloat = webgl2 ? gl.HALF_FLOAT : texHalfFLoat.HALF_FLOAT_OES\n\n    let RGBA, RG, R\n\n    if (webgl2) {\n      RGBA = getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, halfFloat)\n      RG = getSupportedFormat(gl, gl.RG16F, gl.RG, halfFloat)\n      R = getSupportedFormat(gl, gl.R16F, gl.RED, halfFloat)\n    } else {\n      RGBA = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloat)\n      RG = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloat)\n      R = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloat)\n    }\n\n    return {\n      RGBA,\n      RG,\n      R,\n      halfFloat,\n      hasLinear,\n    }\n  }, [gl, version])\n\n  return memoized\n}\n","import { useMemo } from 'react'\n\nexport default function useResolution(size, width, height) {\n  const memoized = useMemo(() => {\n    let aspectRatio = 1\n\n    if (width && height) {\n      aspectRatio = width / height\n    }\n\n    if (aspectRatio < 1) {\n      aspectRatio = 1.0 / aspectRatio\n    }\n\n    const max = Math.round(size * aspectRatio)\n    const min = Math.round(size)\n\n    if (width > height) {\n      return [max, min]\n    } else {\n      return [min, max]\n    }\n  }, [size, width, height])\n\n  return memoized\n}\n","import { useEffect } from 'react'\nimport { timer } from 'd3-timer'\nimport { convertHex } from '@react-vertex/color-hooks'\nimport { useWebGLContext, useCanvasSize } from '@react-vertex/core'\nimport * as config from './config'\nimport { generateColor } from './utils'\nimport {\n    usePointers,\n    usePrograms,\n    useFramebuffers,\n    useFormats,\n    useResolution,\n} from './customHooks'\n\nconst backColor = convertHex(config.BACK_COLOR)\n\nfunction Simulation(props) {\n    const { width, clientWidth, height, clientHeight } = useCanvasSize()\n    const { colorTheme } = props\n\n    const gl = useWebGLContext()\n    const formats = useFormats(gl)\n\n    const pointers = usePointers(colorTheme)\n    const programs = usePrograms(gl, formats.hasLinear)\n\n    const simSize = useResolution(config.SIM_RESOLUTION, width, height)\n    const dyeSize = useResolution(config.DYE_RESOLUTION, width, height)\n\n    const framebuffers = useFramebuffers(gl, dyeSize, simSize, formats)\n\n    useEffect(() => {\n        const {\n            advection,\n            background,\n            clear,\n            color,\n            curl,\n            displayShading,\n            divergence,\n            gradient,\n            pressure,\n            splat,\n            vorticity,\n        } = programs\n\n        const {\n            curlFBO,\n            divergenceFBO,\n            densityDFBO,\n            pressureDFBO,\n            velocityDFBO,\n        } = framebuffers\n\n        const splatStack = []\n\n        const renderToBuffer = (() => {\n            const verts = new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1])\n            const index = new Uint16Array([0, 1, 2, 0, 2, 3])\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer())\n            gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW)\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer())\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, index, gl.STATIC_DRAW)\n            gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0)\n            gl.enableVertexAttribArray(0)\n\n            return buffer => {\n                gl.bindFramebuffer(gl.FRAMEBUFFER, buffer)\n                gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0)\n            }\n        })()\n\n        function input() {\n            if (splatStack.length > 0) {\n                multipleSplats(splatStack.pop())\n            }\n\n            for (let i = 0; i < pointers.length; i++) {\n                const p = pointers[i]\n                if (p.moved) {\n                updateSplat(p.x, p.y, p.dx, p.dy, p.color)\n                p.moved = false\n                }\n            }\n        }\n\n        function step(dt) {\n            gl.disable(gl.BLEND)\n            gl.viewport(0, 0, simSize[0], simSize[1])\n\n            gl.useProgram(curl.program)\n            gl.uniform2f(curl.uniforms.texelSize, 1.0 / simSize[0], 1.0 / simSize[1])\n            gl.uniform1i(curl.uniforms.uVelocity, velocityDFBO.read.attach(0))\n            renderToBuffer(curlFBO.fbo)\n\n            gl.useProgram(vorticity.program)\n            gl.uniform2f(\n                vorticity.uniforms.texelSize,\n                1.0 / simSize[0],\n                1.0 / simSize[1],\n            )\n            gl.uniform1i(vorticity.uniforms.uVelocity, velocityDFBO.read.attach(0))\n            gl.uniform1i(vorticity.uniforms.uCurl, curlFBO.attach(1))\n            gl.uniform1f(vorticity.uniforms.curl, config.CURL)\n            gl.uniform1f(vorticity.uniforms.dt, dt)\n            renderToBuffer(velocityDFBO.write.fbo)\n            velocityDFBO.swap()\n\n            gl.useProgram(divergence.program)\n            gl.uniform2f(\n                divergence.uniforms.texelSize,\n                1.0 / simSize[0],\n                1.0 / simSize[1],\n            )\n            gl.uniform1i(divergence.uniforms.uVelocity, velocityDFBO.read.attach(0))\n            renderToBuffer(divergenceFBO.fbo)\n\n            gl.useProgram(clear.program)\n            gl.uniform1i(clear.uniforms.uTexture, pressureDFBO.read.attach(0))\n            gl.uniform1f(clear.uniforms.value, config.PRESSURE_DISSIPATION)\n            renderToBuffer(pressureDFBO.write.fbo)\n            pressureDFBO.swap()\n\n            gl.useProgram(pressure.program)\n            gl.uniform2f(\n                pressure.uniforms.texelSize,\n                1.0 / simSize[0],\n                1.0 / simSize[1],\n            )\n            gl.uniform1i(pressure.uniforms.uDivergence, divergenceFBO.attach(0))\n\n            for (let i = 0; i < config.PRESSURE_ITERATIONS; i++) {\n                gl.uniform1i(pressure.uniforms.uPressure, pressureDFBO.read.attach(1))\n                renderToBuffer(pressureDFBO.write.fbo)\n                pressureDFBO.swap()\n            }\n\n            gl.useProgram(gradient.program)\n            gl.uniform2f(\n                gradient.uniforms.texelSize,\n                1.0 / simSize[0],\n                1.0 / simSize[1],\n            )\n            gl.uniform1i(gradient.uniforms.uPressure, pressureDFBO.read.attach(0))\n            gl.uniform1i(gradient.uniforms.uVelocity, velocityDFBO.read.attach(1))\n            renderToBuffer(velocityDFBO.write.fbo)\n            velocityDFBO.swap()\n\n            gl.useProgram(advection.program)\n            gl.uniform2f(\n                advection.uniforms.texelSize,\n                1.0 / simSize[0],\n                1.0 / simSize[1],\n            )\n\n            if (!formats.shasLinear) {\n                gl.uniform2f(\n                advection.uniforms.dyeTexelSize,\n                1.0 / simSize[0],\n                1.0 / simSize[1],\n                )\n            }\n\n            const velocityId = velocityDFBO.read.attach(0)\n            gl.uniform1i(advection.uniforms.uVelocity, velocityId)\n            gl.uniform1i(advection.uniforms.uSource, velocityId)\n            gl.uniform1f(advection.uniforms.dt, dt)\n            gl.uniform1f(advection.uniforms.dissipation, config.VELOCITY_DISSIPATION)\n            renderToBuffer(velocityDFBO.write.fbo)\n            velocityDFBO.swap()\n\n            gl.viewport(0, 0, dyeSize[0], dyeSize[1])\n\n            if (!formats.hasLinear) {\n                gl.uniform2f(\n                advection.uniforms.dyeTexelSize,\n                1.0 / dyeSize[0],\n                1.0 / dyeSize[1],\n                )\n            }\n\n            gl.uniform1i(advection.uniforms.uVelocity, velocityDFBO.read.attach(0))\n            gl.uniform1i(advection.uniforms.uSource, densityDFBO.read.attach(1))\n            gl.uniform1f(advection.uniforms.dissipation, config.DENSITY_DISSIPATION)\n            renderToBuffer(densityDFBO.write.fbo)\n            densityDFBO.swap()\n        }\n\n        function render(target) {\n            if (target == null || !config.TRANSPARENT) {\n                gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA)\n                gl.enable(gl.BLEND)\n            } else {\n                gl.disable(gl.BLEND)\n            }\n\n            const tWidth = target == null ? width : dyeSize[0]\n            const tHeight = target == null ? height : dyeSize[1]\n\n            gl.viewport(0, 0, width, height)\n\n            if (!config.TRANSPARENT) {\n                gl.useProgram(color.program)\n                gl.uniform4f(color.uniforms.color, ...backColor)\n                renderToBuffer(target)\n            }\n\n            if (target == null && config.TRANSPARENT) {\n                gl.useProgram(background.program)\n                gl.uniform1f(background.uniforms.aspectRatio, tWidth / tHeight)\n                renderToBuffer(null)\n            }\n\n            gl.useProgram(displayShading.program)\n            gl.uniform2f(\n                displayShading.uniforms.texelSize,\n                1.0 / tWidth,\n                1.0 / tHeight,\n            )\n            gl.uniform1i(displayShading.uniforms.uTexture, densityDFBO.read.attach(0))\n\n            renderToBuffer(target)\n        }\n\n        function updateSplat(x, y, dx, dy, splatRGB) {\n            gl.viewport(0, 0, simSize[0], simSize[1])\n\n            const centerX = x / clientWidth\n            const centerY = 1.0 - y / clientHeight\n\n            gl.useProgram(splat.program)\n            gl.uniform1i(splat.uniforms.uTarget, velocityDFBO.read.attach(0))\n            gl.uniform1f(splat.uniforms.aspectRatio, width / height)\n            gl.uniform2f(splat.uniforms.point, centerX, centerY)\n            gl.uniform3f(splat.uniforms.color, dx, -dy, 1.0)\n            gl.uniform1f(splat.uniforms.radius, config.SPLAT_RADIUS / 100.0)\n            renderToBuffer(velocityDFBO.write.fbo)\n            velocityDFBO.swap()\n\n            gl.viewport(0, 0, dyeSize[0], dyeSize[1])\n            gl.uniform1i(splat.uniforms.uTarget, densityDFBO.read.attach(0))\n            gl.uniform3f(splat.uniforms.color, splatRGB.r, splatRGB.g, splatRGB.b)\n            renderToBuffer(densityDFBO.write.fbo)\n            densityDFBO.swap()\n        }\n\n        function multipleSplats(amount) {\n            for (let i = 0; i < amount; i++) {\n                const splatRGB = generateColor(colorTheme)\n                splatRGB.r *= 10.0\n                splatRGB.g *= 10.0\n                splatRGB.b *= 10.0\n                const x = width * Math.random()\n                const y = height * Math.random()\n                const dx = 1000 * (Math.random() - 0.5)\n                const dy = 1000 * (Math.random() - 0.5)\n                updateSplat(x, y, dx, dy, splatRGB)\n            }\n        }\n\n        const timerLoop = timer(() => {\n        input()\n        step(0.016)\n        render(null)\n        })\n\n        if(config.INITIAL_SPLATS > 0) multipleSplats(config.INITIAL_SPLATS)\n\n        return () => timerLoop.stop()\n    }, [\n        gl,\n        formats,\n        pointers,\n        simSize,\n        dyeSize,\n        width,\n        clientWidth,\n        height,\n        clientHeight,\n        programs,\n        framebuffers,\n    ])\n\n    return null\n}\n\nexport default Simulation\n","import React, { Component, useRef } from 'react'\nimport { Canvas } from '@react-vertex/core'\nimport { useMeasure } from '@react-vertex/dom-hooks'\nimport Simulation from './Simulation'\nimport { color } from './customHooks/usePrograms/shaders';\n\nconst attrs = {\n    alpha: true,\n    depth: false,\n    stencil: false,\n    antialias: false,\n    preserveDrawingBuffer: false,\n}\n\nconst style = {\n    borderRadius: 0,\n    cursor: 'default',\n    userSelect: 'none',\n    WebkitTapHighlightColor: 'transparent',\n}\n\nfunction FluidSimulation(props) {\n    const container = useRef()\n    const { width } = useMeasure(container)\n    const height = 300\n    // colorTheme is an array of any combination of r, o, y, g, b, v\n    // add more of one character for more weight\n    // example: ['r','r','g','v']\n    const { colorTheme } = props\n\n    return (\n      <div className='fluid-simulation'>\n        <div ref={container}>\n          {width ? (\n            <Canvas\n              webgl2\n              width={width}\n              height={height}\n              canvasStyle={style}\n              contextAttrs={attrs}\n            >\n              <Simulation colorTheme={colorTheme}/>\n            </Canvas>\n          ) : null}\n        </div>\n      </div>\n    )\n  }\n\n\nexport default FluidSimulation\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport actions from 'store/actions';\n\nimport { Motion, spring } from 'react-motion';\n\nimport FluidSimulation from 'components/fluidSimulation';\nimport './home.scss';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {open: false};\n    };\n\n    handleMouseDown = () => {\n        this.setState({open: !this.state.open});\n    };\n\n    handleTouchStart = (e) => {\n        e.preventDefault();\n        this.handleMouseDown();\n    };\n\n    render() {\n        const { layer1 } = this.props.layers;\n        const style1 = {\n            x: spring(this.state.open ? -200 : 200, {stiffness: 120, damping: 50}),\n            y: spring(this.state.open ? -50 : 50, {stiffness: 120, damping: 50})\n        };\n        const colorTheme = ['r','v','v','v'];\n\n        return (\n            <div className='home'>\n                <FluidSimulation colorTheme={colorTheme}/>\n                \n                <p>Test Message</p>\n                <button onClick={e => this.props.setLayer1(!layer1)}>\n                    toggle layer 1\n                </button>\n                {layer1 &&\n                    <p>layer 1 activated</p>\n                }\n                <button\n                onMouseDown={this.handleMouseDown}\n                onTouchStart={this.handleTouchStart}\n                >\n                Toggle\n                </button>\n\n                <Motion \n                style={style1}\n                >\n                    {({x, y}) =>\n                    // children is a callback which should accept the current value of\n                    // `style`\n                    <div className=\"test\">\n                        <div\n                        className=\"test-block\" \n                        style={{\n                            WebkitTransform: `translate3d(${x}px, ${y}px, 0)`,\n                            transform: `translate3d(${x}px, ${y}px, 0)`,\n                        }}\n                        >\n                            test text\n                        </div>\n                    </div>\n                    }\n                </Motion>\n\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    return {\n        layers: state.content.home,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setLayer1: (data) => dispatch(actions.setLayer1(data)),\n    };\n};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Home);\n","import React, { Component } from 'react';\nimport { Route, withRouter } from 'react-router-dom';\n// import { connect } from 'react-redux';\n\nimport Home from 'components/home';\n\nclass Content extends Component {\n    render() {\n        return (\n            <section className='content'>\n                <div style={{width: '100%'}}>\n                    <Route exact path='/' render={() => <Home />} />\n                </div>\n            </section>\n        );\n    }\n}\n\n// const mapStateToProps = state => {\n//     return {};\n// };\n\n// const mapDispatchToProps = dispatch => {\n//     return {};\n// };\n\nexport default withRouter(Content);\n","import React from 'react';\nimport './App.scss';\n\nimport Content from './components/content'\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <Content />\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { store } from 'store';\nimport './index.scss';\n// import * as serviceWorker from './serviceWorker';\n\nimport App from './App';\n\nReactDOM.render(\n    <Provider store={store}>\n        <Router>\n            <App />\n        </Router>\n    </Provider>\n    ,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}